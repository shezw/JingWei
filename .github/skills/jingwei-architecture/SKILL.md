---
name: jingwei-architecture
description: JingWei(精卫) 渲染显示库的架构设计和实现标准定义
---

JingWei(精卫) 是一个2d底层渲染/显示库。主要实现了一层非常轻量和扁平的渲染显示抽象层以及硬件加速抽象。严格使用C语言作为程序语言，设计目的是为低性能嵌入式设备提供一套标准的渲染显示端口。

JingWei使用CMake作为构建系统，支持多平台构建和交叉编译。其代码结构和模块划分遵循一定的规范，以保证代码的可维护性和可扩展性。

JingWei的目录包含以下几个主要部分：

- `src/`: 包含JingWei的核心源代码，按照功能模块划分为多个子目录。
- `include/`: 包含JingWei的公共头文件，供外部使用者调用。
- `tests/`: 包含JingWei的测试代码，用于验证库的功能和性能。
- `examples/`: 包含JingWei的示例代码，展示如何使用JingWei进行渲染显示开发。
- `docs/`: 包含JingWei的文档资料，包括设计文档、API文档和使用指南等。
- `playground/`: 包含JingWei的实验性代码和原型实现，用于测试新的设计思路和功能。

JingWei主要的模块划分包括：
- `core/`: 包含JingWei的核心模块，包含 绘制、渲染、图层系统、资源管理等。
- `event/`: 包含JingWei的事件系统模块，用于处理输入事件、系统事件等。
- `proxy/`: 包含JingWei的代理模块，如渲染代理、显示代理等，用于实现不同平台和设备的适配。
- `platform/`: 包含JingWei的跨平台适配模块，如文件系统、线程等平台相关功能
- `accelerator/`: 包含JingWei的硬件加速模块，如G2D、OpenGL、Vulkan等图形API的封装和适配。
- `utils/`: 包含JingWei的工具模块，如日志系统、内存管理等辅助功能。

JingWei采用极致简单的显示管理设计: 
- 1:1的显示管理: 每个显示设备对应一个Display对象，Display对象管理该设备上的所有图层和渲染操作。
- 无窗口: JingWei抛弃窗口的概念，即抛弃掉传统GUI系统中窗口管理的复杂性
- 层级渲染: JingWei采用层级渲染的设计，每个图层可以独立进行绘制和变换，最终合成输出至Display。
- 资源管理: JingWei只提供Buffer等底层资源的管理和抽象，不涉及更高层次的UI组件或布局管理。
- 硬件加速: JingWei提供硬件加速抽象层，支持多种图形API的适配和使用，以提升渲染性能和效率。

JingWei使用Proxy机制抽象软件/硬件实现: 
- Proxy设计: 每个Proxy对应一个Display对象，负责该Display的渲染和显示操作的具体实现。Proxy可根据显示设备独立管理。
- Proxy事件: 每个Proxy绑定一个事件管理器，负责处理该Proxy的输入事件、系统事件等，并触发相应的渲染和显示操作。
- Proxy消息: Proxy之间通过事件进行通信和协作，例如一个Proxy可以发送事件通知另一个Proxy进行渲染或显示操作。

JingWei的主循环设计: 
- 事件驱动: JingWei采用事件驱动的设计，主循环等待和处理输入事件、系统事件等，触发相应的渲染和显示操作。
- 动态刷新率: JingWei支持动态刷新率的设计，根据显示内容和系统负载动态调整渲染和显示的频率，以优化性能和功耗。
